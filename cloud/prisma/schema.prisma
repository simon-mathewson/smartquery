generator client {
  provider = "prisma-client-js"
  output   = "generated"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Connection {
  id                 String   @id @default(uuid())
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  database           String
  dbUser             String?
  encryptCredentials Boolean
  engine             Engine
  host               String?
  name               String
  password           String?
  port               Int?
  schema             String?
  sshHost            String?
  sshPassword        String?
  sshPort            Int?
  sshPrivateKey      String?
  sshUser            String?
  user               User     @relation(fields: [userId], references: [id])
  userId             String
}

model User {
  id                     String       @id @default(uuid())
  createdAt              DateTime     @default(now())
  updatedAt              DateTime     @updatedAt
  connections            Connection[]
  dataEncryptionKey      String
  dataEncryptionKeyNonce String
  email                  String       @unique
  password               String
  passwordSalt           String
}

enum Engine {
  mysql
  postgres
  sqlite
}
